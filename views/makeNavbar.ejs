<script>
	$(function() {
	var availableTags = [
	  "ActionScript",
	  "AppleScript",
	  "Asp",
	  "BASIC",
	  "C",
	  "C++",
	  "Clojure",
	  "COBOL",
	  "ColdFusion",
	  "Erlang",
	  "Fortran",
	  "Groovy",
	  "Haskell",
	  "Java",
	  "JavaScript",
	  "Lisp",
	  "Perl",
	  "PHP",
	  "Python",
	  "Ruby",
	  "Scala",
	  "Scheme"
	];
	function split( val ) {
	  return val.split( /,\s*/ );
	}
	function extractLast( term ) {
	  return split( term ).pop();
	}

	$( "#tags" )
	  // don't navigate away from the field on tab when selecting an item
	  .bind( "keydown", function( event ) {
		if ( event.keyCode === $.ui.keyCode.TAB &&
			$( this ).autocomplete( "instance" ).menu.active ) {
		  event.preventDefault();
		}
	  })
	  .autocomplete({
		minLength: 0,
		source: function( request, response ) {
		  // delegate back to autocomplete, but extract the last term
		  response( $.ui.autocomplete.filter(
			availableTags, extractLast( request.term ) ) );
		},
		focus: function() {
		  // prevent value inserted on focus
		  return false;
		},
		select: function( event, ui ) {
		  var terms = split( this.value );
		  // remove the current input
		  terms.pop();
		  // add the selected item
		  terms.push( ui.item.value );
		  // add placeholder to get the comma-and-space at the end
		  terms.push( "" );
		  this.value = terms.join( ", " );
		  return false;
		}
	  });
	});
</script>


<script>
	$(document).ready(function(){
		$.get("/amILoggedIn", function(data){
			//console.log(data);
			if (data =="no") {window.location.href = '/login.html';}
		});
		/*
		$.get("/categories",function(categories){
			
			categories = $.parseJSON(categories);

			for (var i = 0; i < categories.length; i++)
			{
				var cat = '<li>\
					<a href="#">'+categories[i].name +'</a>\
					<ul>';
				for (var j = 0; j < categories[i].interests.length; j++)
				{
					cat += '<li><a href="/interests/'+ categories[i].interests[j].nickname+'">' + categories[i].interests[j].name + '</a></li>';
				}
				cat += '</ul>\
					</li>';
				$("#menu").append(cat);
				//$('.panel-collapse').collapse('hide');
			}
			
		});
		*/
	});
</script>
		
<div id="navbar" role="navigation">
		<a href="/" id="title">
			RPHub
		</a>
		<ul id="menu">
			<% for (var i = 0; i < categories.length; i++) {%>
				<li>
					<a href=""><%=categories[i].name %></a>
					<ul>
						<% for (var j = 0; j < categories[i].interests.length; j++) {%>
							<li><a href="/interests/<%=categories[i].interests[j].nickname%>"><%=categories[i].interests[j].name%></a></li>
						<% } %>
					</ul>
				</li>
			<% } %>
		</ul>
		
		<form style="float: left;">
			
			<div class="input-group">
				<input class="form-control" id="navsearch" name="search" placeholder="Search" type="text">
			</div>
			
		</form>
		
		<div class="ui-widget">
  <label for="tags">Tag programming languages: </label>
  <input id="tags" size="50">
</div>
		
		<!-- <span style="float: right;" class="menu">First Last</span> -->
		
	</div>